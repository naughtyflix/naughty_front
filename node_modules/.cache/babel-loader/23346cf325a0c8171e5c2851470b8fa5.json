{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useMemo,useState,useCallback}from'react';import styled from'styled-components';import{getContract}from'utils/erc20';import{Button,Flex,Text}from'@pancakeswap-libs/uikit';import{useFarmFromPid,useFarmUser}from'state/hooks';import useI18n from'hooks/useI18n';import UnlockButton from'components/UnlockButton';import{useApprove}from'hooks/useApprove';import StakeAction from'./StakeAction';import HarvestAction from'./HarvestAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Action=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding-top: 16px;\\n\"])));var CardActions=function CardActions(_ref){var farm=_ref.farm,ethereum=_ref.ethereum,account=_ref.account;var TranslateString=useI18n();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),requestedApproval=_useState2[0],setRequestedApproval=_useState2[1];var _useFarmFromPid=useFarmFromPid(farm.pid),pid=_useFarmFromPid.pid,lpAddresses=_useFarmFromPid.lpAddresses,tokenAddresses=_useFarmFromPid.tokenAddresses,isTokenOnly=_useFarmFromPid.isTokenOnly,depositFeeBP=_useFarmFromPid.depositFeeBP;var _useFarmUser=useFarmUser(pid),allowance=_useFarmUser.allowance,tokenBalance=_useFarmUser.tokenBalance,stakedBalance=_useFarmUser.stakedBalance,earnings=_useFarmUser.earnings;var lpAddress=lpAddresses[process.env.REACT_APP_CHAIN_ID];var tokenAddress=tokenAddresses[process.env.REACT_APP_CHAIN_ID];var lpName=farm.lpSymbol.toUpperCase();var isApproved=account&&allowance&&allowance.isGreaterThan(0);var lpContract=useMemo(function(){if(isTokenOnly){return getContract(ethereum,tokenAddress);}return getContract(ethereum,lpAddress);},[ethereum,lpAddress,tokenAddress,isTokenOnly]);var _useApprove=useApprove(lpContract),onApprove=_useApprove.onApprove;var handleApprove=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setRequestedApproval(true);_context.next=4;return onApprove();case 4:setRequestedApproval(false);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[onApprove]);var renderApprovalOrStakeButton=function renderApprovalOrStakeButton(){return isApproved?/*#__PURE__*/_jsx(StakeAction,{stakedBalance:stakedBalance,tokenBalance:tokenBalance,tokenName:lpName,pid:pid,depositFeeBP:depositFeeBP}):/*#__PURE__*/_jsx(Button,{mt:\"8px\",fullWidth:true,disabled:requestedApproval,onClick:handleApprove,children:TranslateString(999,'Approve Contract')});};return/*#__PURE__*/_jsxs(Action,{children:[/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(Text,{bold:true,textTransform:\"uppercase\",color:\"secondary\",fontSize:\"12px\",pr:\"3px\",children:\"GAJ\"}),/*#__PURE__*/_jsx(Text,{bold:true,textTransform:\"uppercase\",color:\"textSubtle\",fontSize:\"12px\",children:TranslateString(999,'Earned')})]}),/*#__PURE__*/_jsx(HarvestAction,{earnings:earnings,pid:pid}),/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(Text,{bold:true,textTransform:\"uppercase\",color:\"secondary\",fontSize:\"12px\",pr:\"3px\",children:lpName}),/*#__PURE__*/_jsx(Text,{bold:true,textTransform:\"uppercase\",color:\"textSubtle\",fontSize:\"12px\",children:TranslateString(999,'Staked')})]}),!account?/*#__PURE__*/_jsx(UnlockButton,{mt:\"8px\",fullWidth:true}):renderApprovalOrStakeButton()]});};export default CardActions;","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/Naughty/naughty_front/src/views/Liquidity/components/FarmCard/CardActionsContainer.tsx"],"names":["React","useMemo","useState","useCallback","styled","getContract","Button","Flex","Text","useFarmFromPid","useFarmUser","useI18n","UnlockButton","useApprove","StakeAction","HarvestAction","Action","div","CardActions","farm","ethereum","account","TranslateString","requestedApproval","setRequestedApproval","pid","lpAddresses","tokenAddresses","isTokenOnly","depositFeeBP","allowance","tokenBalance","stakedBalance","earnings","lpAddress","process","env","REACT_APP_CHAIN_ID","tokenAddress","lpName","lpSymbol","toUpperCase","isApproved","isGreaterThan","lpContract","onApprove","handleApprove","console","error","renderApprovalOrStakeButton"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useCallback } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport styled from 'styled-components'\r\nimport { provider } from 'web3-core'\r\nimport { getContract } from 'utils/erc20'\r\nimport { Button, Flex, Text } from '@pancakeswap-libs/uikit'\r\nimport { Farm } from 'state/types'\r\nimport { useFarmFromPid, useFarmFromSymbol, useFarmUser } from 'state/hooks'\r\nimport useI18n from 'hooks/useI18n'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport { useApprove } from 'hooks/useApprove'\r\nimport StakeAction from './StakeAction'\r\nimport HarvestAction from './HarvestAction'\r\n\r\nconst Action = styled.div`\r\n  padding-top: 16px;\r\n`\r\nexport interface FarmWithStakedValue extends Farm {\r\n  apy?: BigNumber\r\n}\r\n\r\ninterface FarmCardActionsProps {\r\n  farm: FarmWithStakedValue\r\n  ethereum?: provider\r\n  account?: string\r\n}\r\n\r\nconst CardActions: React.FC<FarmCardActionsProps> = ({ farm, ethereum, account }) => {\r\n  const TranslateString = useI18n()\r\n  const [requestedApproval, setRequestedApproval] = useState(false)\r\n  const { pid, lpAddresses, tokenAddresses, isTokenOnly, depositFeeBP } = useFarmFromPid(farm.pid)\r\n  const { allowance, tokenBalance, stakedBalance, earnings } = useFarmUser(pid)\r\n  const lpAddress = lpAddresses[process.env.REACT_APP_CHAIN_ID]\r\n  const tokenAddress = tokenAddresses[process.env.REACT_APP_CHAIN_ID];\r\n  const lpName = farm.lpSymbol.toUpperCase()\r\n  const isApproved = account && allowance && allowance.isGreaterThan(0)\r\n\r\n  const lpContract = useMemo(() => {\r\n    if(isTokenOnly){\r\n      return getContract(ethereum as provider, tokenAddress);\r\n    }\r\n    return getContract(ethereum as provider, lpAddress);\r\n  }, [ethereum, lpAddress, tokenAddress, isTokenOnly])\r\n\r\n  const { onApprove } = useApprove(lpContract)\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      setRequestedApproval(true)\r\n      await onApprove()\r\n      setRequestedApproval(false)\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }, [onApprove])\r\n\r\n  const renderApprovalOrStakeButton = () => {\r\n    return isApproved ? (\r\n      <StakeAction stakedBalance={stakedBalance} tokenBalance={tokenBalance} tokenName={lpName} pid={pid} depositFeeBP={depositFeeBP} />\r\n    ) : (\r\n      <Button mt=\"8px\" fullWidth disabled={requestedApproval} onClick={handleApprove}>\r\n        {TranslateString(999, 'Approve Contract')}\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Action>\r\n      <Flex>\r\n        <Text bold textTransform=\"uppercase\" color=\"secondary\" fontSize=\"12px\" pr=\"3px\">\r\n          GAJ\r\n        </Text>\r\n        <Text bold textTransform=\"uppercase\" color=\"textSubtle\" fontSize=\"12px\">\r\n          {TranslateString(999, 'Earned')}\r\n        </Text>\r\n      </Flex>\r\n      <HarvestAction earnings={earnings} pid={pid} />\r\n      <Flex>\r\n        <Text bold textTransform=\"uppercase\" color=\"secondary\" fontSize=\"12px\" pr=\"3px\">\r\n          {lpName}\r\n        </Text>\r\n        <Text bold textTransform=\"uppercase\" color=\"textSubtle\" fontSize=\"12px\">\r\n          {TranslateString(999, 'Staked')}\r\n        </Text>\r\n      </Flex>\r\n      {!account ? <UnlockButton mt=\"8px\" fullWidth /> : renderApprovalOrStakeButton()}\r\n    </Action>\r\n  )\r\n}\r\n\r\nexport default CardActions\r\n"]},"metadata":{},"sourceType":"module"}